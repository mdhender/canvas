<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Basic Home Page</title>
	<link rel="stylesheet" href="/css/canvas.css" type="text/css">
</head>
<body>
    <header>
        <h1><a href="/">Canvas</a></h1>
        <p>the tabula rasa of templates</p>
    </header>
    <nav>
        <ul>
            <li><a href="/">Posts</a></li>
        </ul>
    </nav>

    <main>
        <article>
            <header>
                <h2>Basic Home Page</h2>
            </header>
<p>I want my home page to show a list of my posts with the newest posts listed first.</p>

<p>The layout for this uses sections to wrap the summary:</p>

<pre><code>&lt;section&gt;
    &lt;header&gt;
        &lt;h2&gt;Post Title&lt;/h2&gt;
    &lt;/header&gt;
    &lt;p&gt;Post Summary&lt;/p&gt;
    &lt;nav&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;a href=&quot;Post Link&quot;&gt;Read More &amp;raquo;&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/nav&gt;
&lt;/section&gt;
</code></pre>

<p>For each summary, we need to</p>

<ol>
<li>Replace &ldquo;Post Title&rdquo; with the real title.</li>
<li>Replace &ldquo;Post Summary&rdquo; with a summary of the post.</li>
<li>Replace &ldquo;Post Link&rdquo; with a link to the full post.</li>
</ol>

<p>Fortunately for us, Hugo has variables for each of these.</p>

<pre><code>&lt;section&gt;
    &lt;header&gt;
        &lt;h2&gt;{{ .Title }}&lt;/h2&gt;
    &lt;/header&gt;
    {{ .Summary }}
    &lt;nav&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;a href=&quot;{{ .Permalink | relURL }}&quot;&gt;Read More &amp;raquo;&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/nav&gt;
&lt;/section&gt;
</code></pre>

<p>The <code>relURL</code> is a template function that fixes up a URL.
You can look in the Hugo <a href="https://gohugo.io/documentation/">documentation</a> for more information.</p>

<p>To get a list of posts, we have to use the &ldquo;range&rdquo; method.
That method runs a query against a set of data and calls our template code once for each bit of data.</p>

<p>I&rsquo;m going to jump ahead and just say that the template variable <code>.Pages</code> contains all of the content for the site.</p>

<pre><code>{{ range where .Pages.ByPublishDate.Reverse &quot;Section&quot; &quot;posts&quot; }}
&lt;section&gt;
    &lt;header&gt;
        &lt;h2&gt;{{ .Title }}&lt;/h2&gt;
    &lt;/header&gt;
    {{ .Summary }}
    &lt;nav&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;a href=&quot;{{ .Permalink | relURL }}&quot;&gt;Read More &amp;raquo;&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/nav&gt;
&lt;/section&gt;
{{ end }}
</code></pre>

<p>As I mentioned, <code>.Pages</code> is the set of all the content in the site.
Adding <code>.ByPublishDate.Reverse</code> to it sorts that set by the post&rsquo;s publish date.</p>

<p>The value <code>&quot;Section&quot;</code> tells the range method to only grab a single kind of content.
In this case, that&rsquo;s all posts.</p>

<p>Let&rsquo;s update our <code>layouts/index.html</code> to have our main and sidebar to look like:</p>

<pre><code>&lt;main&gt;
    {{ range where .Pages.ByPublishDate.Reverse &quot;Section&quot; &quot;posts&quot; }}
        &lt;section&gt;
            &lt;header&gt;
                &lt;h2&gt;{{ .Title }}&lt;/h2&gt;
            &lt;/header&gt;
            {{ .Summary }}
            &lt;nav&gt;
                &lt;ul&gt;
                    &lt;li&gt;&lt;a href=&quot;{{ .Permalink | relURL }}&quot;&gt;Read More &amp;raquo;&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/nav&gt;
        &lt;/section&gt;
    {{ end }}
&lt;/main&gt;

&lt;aside&gt;
    &lt;section&gt;
        &lt;h4&gt;Recent Posts&lt;/h4&gt;
        &lt;nav&gt;
            &lt;ul&gt;
            {{ range where .Pages.ByPublishDate.Reverse &quot;Section&quot; &quot;posts&quot; }}
                &lt;li&gt;&lt;a href=&quot;{{ .Permalink | relURL }}&quot;&gt;{{ .Title }}&lt;/a&gt;&lt;/li&gt;
            {{ end }}
            &lt;/ul&gt;
        &lt;/nav&gt;
    &lt;/section&gt;
&lt;/aside&gt;
</code></pre>

<p>When we use <code>hugo server --buildDrafts</code> (remember, we need the drafts flag since the posts have <code>draft: true</code> in them),
our home page will have a list of the posts.</p>

<p>It&rsquo;s not perfect - the &ldquo;Read More&rdquo; links are broken and the summary includes block quotes.
That&rsquo;s work for some future posts.</p>

<h3 id="postscript-template-engine">Postscript: Template Engine</h3>

<p>Hugo uses the <a href="https://golang.org/pkg/html/template/">Go template engine</a> with some customizations to make it easier to use.</p>
        </article>
    </main>

    <footer>
        <ul>
            <li>&copy; 2019 - Michael D Henderson</li>
            <li><a href="https://github.com/mdhender/canvas">Github</a></li>
        </ul>
    </footer>
</body>
</html>
